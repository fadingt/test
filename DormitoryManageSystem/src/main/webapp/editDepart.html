<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		
			<link rel="stylesheet" href="css/amazeui.min.css">
		<link rel="stylesheet" href="css/admin.css">
		<link rel="stylesheet" href="css/app.css">
		<script src="js/jquery-1.11.3.min.js"></script>
		<style>
			.admin-main{
				padding-top: 0px;
			}
		</style>
	</head>
	<body>
		
		<div class="am-cf admin-main">
			<!-- content start -->
			<div class="admin-content">
				<div class="admin-content-body">
					<div class="am-g">
						<form class="am-form am-form-horizontal" action="role/addroleSubmit.action" method="post" style="padding-top: 30px;">
							<input value="504" name="roleId" type="hidden">
							<div class="am-form-group">
								<label for="user-name" class="am-u-sm-3 am-form-label">
									维修工编号
								</label>
								<div class="am-u-sm-9">
									<input id="roleId" required="" placeholder="aaaa" value="" name="departName" type="text">
									<!--<small id="helpRole">输入部门名称。</small>-->
								</div>
							</div>
							<div class="am-form-group">
								<label for="user-name" class="am-u-sm-3 am-form-label">
									维修工姓名
								</label>
								<div class="am-u-sm-9">
									<input id="roleName" required="" placeholder="请输入维修工姓名" value="" name="departName" type="text">
									<!--<small id="helpRole">输入部门名称。</small>-->
								</div>
							</div>
							<div class="am-form-group">
								<label for="user-name" class="am-u-sm-3 am-form-label">
									维修工邮箱
								</label>
								<div class="am-u-sm-9">
									<input id="roleEmail" required="" placeholder="请输入维修工邮箱" value="" name="departName" type="text">
									<!--<small id="helpRole">输入部门名称。</small>-->
								</div>
							</div>
							<div class="am-form-group">
								<label for="user-name" class="am-u-sm-3 am-form-label">
									维修工电话
								</label>
								<div class="am-u-sm-9">
									<input id="rolePhone" required="" placeholder="请输入维修工电话" value="" name="departName" type="text">
									<!--<small id="helpRole">输入部门名称。</small>-->
								</div>
							</div>

							<div class="am-form-group">
								<div class="am-u-sm-9 am-u-sm-push-3">
									<input id="addRole" class="am-btn am-btn-success" value="提交" type="button" onclick="add()">
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="js/jquery-1.11.3.min.js"></script>
	<!--<![endif]-->
	<script type="text/javascript" src="myplugs/js/plugs.js"></script>
<script type="application/javascript" >
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return decodeURI(r[2]); return null;
    }
    $(document).ready(function () {
        var mId = getQueryString("mId");
        var mName = getQueryString("mName");
        var mEmail = getQueryString("mEmail");
        var mPhone = getQueryString("mPhone");
        $("#roleId").attr("value",mId);
        $("#roleId").attr("readonly","true");
        $("#roleName").attr("value",mName);
        $("#roleEmail").attr("value",mEmail);
        $("#rolePhone").attr("value",mPhone);
//
//        function getvalue(name) {
//            var str = window.location.search;
//            if (str.indexOf(name) != -1) {
//                var pos_start = str.indexOf(name) + name.length + 1;
//                var pos_end = str.indexOf("&", pos_start);
//                if (pos_end == -1) {
//                    return str.substring(pos_start);
//                }
//                else {
//                    return str.substring(pos_start, pos_end)
//                }
//            }
//        };
//       /* var url = decodeURI(location.href);*/
//        //获取编辑过来的宿舍id
//		alert("问号传参数");
//        var mId = getvalue("mId");
//        var mName = getvalue("mName");
//        alert(mName);
//        var mEmail = getvalue("mEmail");
//        alert(mEmail);
//        var mPhone = getvalue("mPhone");
//        alert(mPhone);
//        $("#roleId").attr("value",mId);
    });

    /*$("#roleId").attr("placeholder",a);*/
	function add() {
	    var mId = $("#roleId").val();
        var mName = $("#roleName").val();
        var mEmail = $("#roleEmail").val();
        var mPhone = $("#rolePhone").val();
        /*window.opener.location.href=window.opener.location.href;
        window.close();*/
        $.ajax({
            url:"maintain/gai",
			type:"post",

			data:{
                mId:mId,
			    mName:mName,
				mEmail:mEmail,
				mPhone:mPhone
			},
            dataType:"json",
            async:false,
            success:function (result) {
				if(result>0){
				    alert("修改成功");
                    if(window != top){
                        top.location.href = "index.html";
                    }
				}else{
				    alert("修改失败");
				}
            }
        });
    }
	/*$("#addRole").click(function () {
	    alert(111);
		var a = $("#roleName").val();
		var b = $("#roleEmail").val();
		var c = $("#rolePhone").val();
		alert(a);
		alert(b);
		alert(c);
    })*/
</script>
</html>
